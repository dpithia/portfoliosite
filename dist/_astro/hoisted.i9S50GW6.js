const p=["Full-stack developer passionate about creating modern, performant web experiences.","Currently working on exciting projects and contributing to open source.","Building innovative solutions with cutting-edge technologies.","Always learning, always growing, always creating."];let E=0,r=0,d=!1,i=50;function I(){const t=p[E],e=document.getElementById("typing-text");d?(e&&(e.textContent=t.substring(0,r-1)),r--,i=30):(e&&(e.textContent=t.substring(0,r+1)),r++,i=50),!d&&r===t.length?(d=!0,i=2e3):d&&r===0&&(d=!1,E=(E+1)%p.length,i=500),setTimeout(I,i)}window.addEventListener("load",()=>{setTimeout(I,1e3)});const T=document.getElementById("theme-toggle");T?.addEventListener("click",()=>{document.documentElement.classList.contains("dark")?(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light")):(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark"))});const m={"projects-tab":"projects-content","experience-tab":"experience-content","tools-tab":"tools-content"};function B(t){Object.values(m).forEach(n=>{const s=document.getElementById(n);s&&s.classList.add("hidden")}),Object.keys(m).forEach(n=>{const s=document.getElementById(n);s&&(s.classList.remove("bg-primary-600","text-white"),s.classList.add("bg-gray-100","dark:bg-gray-800","text-gray-600","dark:text-gray-400"))});const e=document.getElementById(m[t]),o=document.getElementById(t);if(e){e.classList.remove("hidden");const n=document.getElementById("content-container");n&&n.scrollIntoView({behavior:"smooth",block:"start"})}o&&(o.classList.add("bg-primary-600","text-white"),o.classList.remove("bg-gray-100","dark:bg-gray-800","text-gray-600","dark:text-gray-400"))}Object.keys(m).forEach(t=>{const e=document.getElementById(t);e&&e.addEventListener("click",()=>{B(t),e.style.transform="scale(0.95)",setTimeout(()=>{e.style.transform="scale(1)"},100)})});document.addEventListener("keydown",t=>{if(t.key>="1"&&t.key<="3"){const e=["projects-tab","experience-tab","tools-tab"],o=parseInt(t.key)-1;e[o]&&B(e[o])}});Object.keys(m).forEach(t=>{const e=document.getElementById(t);e&&(e.addEventListener("mouseenter",()=>{e.classList.contains("bg-primary-600")||(e.style.transform="translateY(-1px)")}),e.addEventListener("mouseleave",()=>{e.classList.contains("bg-primary-600")||(e.style.transform="translateY(0)")}))});document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();const o=e.currentTarget.getAttribute("href");if(o){const n=document.querySelector(o);n&&n.scrollIntoView({behavior:"smooth",block:"start"})}})});(function(){(localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"))==="dark"&&document.documentElement.classList.add("dark")})();window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{localStorage.getItem("theme")||(t.matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"))});(function(){(localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"))==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")})();let b=[];function D(t,e,o,n){return Math.sqrt(Math.pow(o-t,2)+Math.pow(n-e,2))}function C(){b=document.querySelectorAll(".grid-cell"),document.querySelector(".grid-background")}function O(t){if(!b.length)return;const e=t.clientX,o=t.clientY;b.forEach(n=>{const s=n.getBoundingClientRect(),c=s.left+s.width/2,g=s.top+s.height/2,h=D(e,o,c,g);if(h<80){const j=Math.max(1,1.5-h/80*.5),y=Math.max(.1,1-h/80*.9);n.style.transform=`scale(${j})`,n.style.backgroundColor=document.documentElement.classList.contains("dark")?"rgba(129, 140, 248, 0.15)":"rgba(99, 102, 241, 0.15)",n.style.borderColor=document.documentElement.classList.contains("dark")?"rgba(129, 140, 248, 0.3)":"rgba(99, 102, 241, 0.3)",n.style.boxShadow=document.documentElement.classList.contains("dark")?`0 0 ${15*y}px rgba(129, 140, 248, ${y*.4})`:`0 0 ${15*y}px rgba(99, 102, 241, ${y*.4})`,n.style.zIndex="1"}else n.style.transform="scale(1)",n.style.backgroundColor="transparent",n.style.borderColor=document.documentElement.classList.contains("dark")?"rgba(129, 140, 248, 0.05)":"rgba(99, 102, 241, 0.05)",n.style.boxShadow="none",n.style.zIndex="0"})}document.addEventListener("DOMContentLoaded",()=>{C(),document.addEventListener("mousemove",O)});const M=new MutationObserver(()=>{C()});M.observe(document.body,{childList:!0,subtree:!0});const S=new MutationObserver(t=>{t.forEach(e=>{if(e.attributeName==="class"){const o=document.documentElement.classList.contains("dark");b.forEach(n=>{n.style.backgroundColor!=="transparent"&&(n.style.backgroundColor=o?"rgba(129, 140, 248, 0.15)":"rgba(99, 102, 241, 0.15)",n.style.borderColor=o?"rgba(129, 140, 248, 0.3)":"rgba(99, 102, 241, 0.3)")})}})});S.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]});window.addEventListener("beforeunload",()=>{M.disconnect(),S.disconnect()});const F=typeof window<"u",f=document.getElementById("contact-modal"),u=document.getElementById("modal-content"),L=document.getElementById("modal-backdrop"),v=document.getElementById("close-modal"),w=document.getElementById("cancel-btn"),a=document.getElementById("contact-form"),k=document.getElementById("success-message"),x=document.getElementById("close-success");function q(){f.classList.remove("hidden"),setTimeout(()=>{u.classList.remove("scale-95","opacity-0"),u.classList.add("scale-100","opacity-100")},10),document.body.style.overflow="hidden"}function l(){u.classList.remove("scale-100","opacity-100"),u.classList.add("scale-95","opacity-0"),setTimeout(()=>{f.classList.add("hidden"),document.body.style.overflow="",a.reset(),k.classList.add("hidden"),a.classList.remove("hidden")},300)}F&&(console.log("Modal elements:",{modal:!!f,modalContent:!!u,backdrop:!!L,closeModal:!!v,cancelBtn:!!w,contactForm:!!a,successMessage:!!k,closeSuccess:!!x}),document.addEventListener("click",t=>{t.target.closest('a[href="#contact"]')&&(console.log("Contact button clicked, opening modal..."),t.preventDefault(),q())}),v.addEventListener("click",l),w.addEventListener("click",l),x.addEventListener("click",l),L.addEventListener("click",l),document.addEventListener("keydown",t=>{t.key==="Escape"&&!f.classList.contains("hidden")&&l()}),a.addEventListener("submit",async t=>{t.preventDefault();const e=new FormData(a),o={name:e.get("name"),email:e.get("email"),subject:e.get("subject"),message:e.get("message")},n=a.querySelector('button[type="submit"]'),s=n.textContent;n.textContent="Sending...",n.disabled=!0;try{const c=await fetch("/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),g=await c.json();c.ok?(a.classList.add("hidden"),k.classList.remove("hidden"),console.log("Email sent successfully:",g)):(alert("Failed to send message: "+(g.error||"Unknown error")),n.textContent=s,n.disabled=!1)}catch(c){console.error("Error submitting form:",c),alert("Failed to send message. Please try again later."),n.textContent=s,n.disabled=!1}}));
